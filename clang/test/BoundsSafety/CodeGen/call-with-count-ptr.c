// REQUIRES: system-darwin
// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py UTC_ARGS: --replace-value-regex "!annotation ![0-9]+" "!tbaa ![0-9]+" "!tbaa\.struct ![0-9]+" "!nosanitize ![0-9]+" "!srcloc ![0-9]+" --prefix-filecheck-ir-name TMP_


// RUN: %clang_cc1 -O0 -triple x86_64 -fbounds-safety -Wno-int-conversion -emit-llvm %s -o - | FileCheck %s --check-prefix=CHECK_X64_O0
// RUN: %clang_cc1 -O0 -triple arm64-apple-iphoneos -fbounds-safety -Wno-int-conversion -emit-llvm %s -o - | FileCheck %s --check-prefix=CHECK_ARM64_O0
// RUN: %clang_cc1 -O0 -triple x86_64 -fbounds-safety -x objective-c -fexperimental-bounds-safety-objc -Wno-int-conversion -emit-llvm %s -o - | FileCheck %s --check-prefix=CHECK_X64_O0
// RUN: %clang_cc1 -O0 -triple arm64-apple-iphoneos -fbounds-safety -Wno-int-conversion -x objective-c -fexperimental-bounds-safety-objc -emit-llvm %s -o - | FileCheck %s --check-prefix=CHECK_ARM64_O0
#include <ptrcheck.h>

#define memmove_(b, ...) __builtin___memmove_chk(b, __VA_ARGS__, b)
#define memmove(d, h, e) memmove_(d, h, e)

int arr[] = {0, 1, 2, 3, 4, 5};



// CHECK_X64_O0-LABEL: @foo(
// CHECK_X64_O0-NEXT:  entry:
// CHECK_X64_O0-NEXT:    [[BUF_ADDR:%.*]] = alloca ptr, align 8
// CHECK_X64_O0-NEXT:    [[LEN_ADDR:%.*]] = alloca ptr, align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP1:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.0", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP2:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP3:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.0", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP10:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.0", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP19:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.2", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP20:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP35:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.2", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP36:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP49:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP56:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP66:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP75:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP83:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.3", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP84:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP99:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.3", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP100:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP119:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_X64_O0-NEXT:    [[AGG_TEMP126:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_X64_O0-NEXT:    store ptr [[BUF:%.*]], ptr [[BUF_ADDR]], align 8
// CHECK_X64_O0-NEXT:    store ptr [[LEN:%.*]], ptr [[LEN_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[TMP0:%.*]] = load ptr, ptr [[BUF_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[TMP1:%.*]] = load ptr, ptr [[LEN_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[TMP2:%.*]] = load i32, ptr [[TMP1]], align 4
// CHECK_X64_O0-NEXT:    [[IDX_EXT:%.*]] = sext i32 [[TMP2]] to i64
// CHECK_X64_O0-NEXT:    [[ADD_PTR:%.*]] = getelementptr inbounds i32, ptr [[TMP0]], i64 [[IDX_EXT]]
// CHECK_X64_O0-NEXT:    [[TMP3:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[TMP0]], ptr [[TMP3]], align 8
// CHECK_X64_O0-NEXT:    [[TMP4:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[ADD_PTR]], ptr [[TMP4]], align 8
// CHECK_X64_O0-NEXT:    [[TMP5:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[TMP0]], ptr [[TMP5]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[TMP6:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_PTR]], ptr [[TMP6]], align 8
// CHECK_X64_O0-NEXT:    [[TMP7:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB]], ptr [[TMP7]], align 8
// CHECK_X64_O0-NEXT:    [[TMP8:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_LB]], ptr [[TMP8]], align 8
// CHECK_X64_O0-NEXT:    [[TMP9:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr @arr, ptr [[TMP9]], align 8
// CHECK_X64_O0-NEXT:    [[TMP10:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr getelementptr inbounds (i32, ptr @arr, i64 6), ptr [[TMP10]], align 8
// CHECK_X64_O0-NEXT:    [[TMP11:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr @arr, ptr [[TMP11]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR4:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR5:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR4]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR6:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB7:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR6]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR8:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB9:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR8]], align 8
// CHECK_X64_O0-NEXT:    [[TMP12:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP2]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_PTR5]], ptr [[TMP12]], align 8
// CHECK_X64_O0-NEXT:    [[TMP13:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP2]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB7]], ptr [[TMP13]], align 8
// CHECK_X64_O0-NEXT:    [[TMP14:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP2]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_LB9]], ptr [[TMP14]], align 8
// CHECK_X64_O0-NEXT:    [[TMP15:%.*]] = load ptr, ptr [[BUF_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[TMP16:%.*]] = load ptr, ptr [[LEN_ADDR]], align 8
// CHECK_X64_O0-NEXT:    [[TMP17:%.*]] = load i32, ptr [[TMP16]], align 4
// CHECK_X64_O0-NEXT:    [[IDX_EXT11:%.*]] = sext i32 [[TMP17]] to i64
// CHECK_X64_O0-NEXT:    [[ADD_PTR12:%.*]] = getelementptr inbounds i32, ptr [[TMP15]], i64 [[IDX_EXT11]]
// CHECK_X64_O0-NEXT:    [[TMP18:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[TMP15]], ptr [[TMP18]], align 8
// CHECK_X64_O0-NEXT:    [[TMP19:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[ADD_PTR12]], ptr [[TMP19]], align 8
// CHECK_X64_O0-NEXT:    [[TMP20:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[TMP15]], ptr [[TMP20]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR13:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR14:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR13]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR15:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB16:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR15]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR17:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB18:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR17]], align 8
// CHECK_X64_O0-NEXT:    [[TMP21:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR14]] to i64
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP20]], ptr align 8 [[AGG_TEMP2]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR21:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB22:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR21]], align 8
// CHECK_X64_O0-NEXT:    [[TMP22:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB22]], ptr [[TMP22]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR23:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR24:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR23]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR25:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB26:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR25]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR27:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB28:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR27]], align 8
// CHECK_X64_O0-NEXT:    [[TMP23:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_PTR24]], ptr [[TMP23]], align 8
// CHECK_X64_O0-NEXT:    [[TMP24:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB26]], ptr [[TMP24]], align 8
// CHECK_X64_O0-NEXT:    [[TMP25:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_LB28]], ptr [[TMP25]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR29:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR30:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR29]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR31:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB32:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR31]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR33:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB34:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR33]], align 8
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP36]], ptr align 8 [[AGG_TEMP2]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR37:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP36]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR38:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR37]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR39:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP36]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB40:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR39]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR41:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP36]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB42:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR41]], align 8
// CHECK_X64_O0-NEXT:    [[TMP26:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_PTR38]], ptr [[TMP26]], align 8
// CHECK_X64_O0-NEXT:    [[TMP27:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB40]], ptr [[TMP27]], align 8
// CHECK_X64_O0-NEXT:    [[TMP28:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_LB42]], ptr [[TMP28]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR43:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR44:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR43]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR45:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB46:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR45]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR47:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB48:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR47]], align 8
// CHECK_X64_O0-NEXT:    [[SUB_PTR_LHS_CAST:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR30]] to i64
// CHECK_X64_O0-NEXT:    [[SUB_PTR_RHS_CAST:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR44]] to i64
// CHECK_X64_O0-NEXT:    [[SUB_PTR_SUB:%.*]] = sub i64 [[SUB_PTR_LHS_CAST]], [[SUB_PTR_RHS_CAST]]
// CHECK_X64_O0-NEXT:    [[CMP:%.*]] = icmp ule i64 24, [[SUB_PTR_SUB]], {{!annotation ![0-9]+}}
// CHECK_X64_O0-NEXT:    br i1 [[CMP]], label [[CONT:%.*]], label [[TRAP:%.*]], {{!annotation ![0-9]+}}
// CHECK_X64_O0:       trap:
// CHECK_X64_O0-NEXT:    call void @llvm.ubsantrap(i8 25) #[[ATTR5:[0-9]+]], {{!annotation ![0-9]+}}
// CHECK_X64_O0-NEXT:    unreachable
// CHECK_X64_O0:       cont:
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP49]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR50:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP49]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR51:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR50]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR52:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP49]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB53:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR52]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR54:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP49]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB55:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR54]], align 8
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP56]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR57:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB58:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR57]], align 8
// CHECK_X64_O0-NEXT:    [[TMP29:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB58]], ptr [[TMP29]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR59:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR60:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR59]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR61:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB62:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR61]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR63:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB64:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR63]], align 8
// CHECK_X64_O0-NEXT:    [[CMP65:%.*]] = icmp ule ptr [[WIDE_PTR_PTR51]], [[WIDE_PTR_PTR60]]
// CHECK_X64_O0-NEXT:    br i1 [[CMP65]], label [[LAND_LHS_TRUE:%.*]], label [[LAND_END:%.*]]
// CHECK_X64_O0:       land.lhs.true:
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP66]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR67:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB68:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR67]], align 8
// CHECK_X64_O0-NEXT:    [[TMP30:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_LB68]], ptr [[TMP30]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR69:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR70:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR69]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR71:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB72:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR71]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR73:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB74:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR73]], align 8
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP75]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR76:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP75]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR77:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR76]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR78:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP75]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB79:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR78]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR80:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP75]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB81:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR80]], align 8
// CHECK_X64_O0-NEXT:    [[CMP82:%.*]] = icmp ule ptr [[WIDE_PTR_PTR70]], [[WIDE_PTR_PTR77]]
// CHECK_X64_O0-NEXT:    br i1 [[CMP82]], label [[LAND_RHS:%.*]], label [[LAND_END]]
// CHECK_X64_O0:       land.rhs:
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP84]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR85:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB86:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR85]], align 8
// CHECK_X64_O0-NEXT:    [[TMP31:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB86]], ptr [[TMP31]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR87:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR88:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR87]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR89:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB90:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR89]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR91:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB92:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR91]], align 8
// CHECK_X64_O0-NEXT:    [[TMP32:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_PTR88]], ptr [[TMP32]], align 8
// CHECK_X64_O0-NEXT:    [[TMP33:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB90]], ptr [[TMP33]], align 8
// CHECK_X64_O0-NEXT:    [[TMP34:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_LB92]], ptr [[TMP34]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR93:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR94:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR93]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR95:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB96:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR95]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR97:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB98:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR97]], align 8
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP100]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR101:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP100]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR102:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR101]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR103:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP100]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB104:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR103]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR105:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP100]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB106:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR105]], align 8
// CHECK_X64_O0-NEXT:    [[TMP35:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_PTR102]], ptr [[TMP35]], align 8
// CHECK_X64_O0-NEXT:    [[TMP36:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_UB104]], ptr [[TMP36]], align 8
// CHECK_X64_O0-NEXT:    [[TMP37:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    store ptr [[WIDE_PTR_LB106]], ptr [[TMP37]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR107:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR108:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR107]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR109:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB110:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR109]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR111:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB112:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR111]], align 8
// CHECK_X64_O0-NEXT:    [[SUB_PTR_LHS_CAST113:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR94]] to i64
// CHECK_X64_O0-NEXT:    [[SUB_PTR_RHS_CAST114:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR108]] to i64
// CHECK_X64_O0-NEXT:    [[SUB_PTR_SUB115:%.*]] = sub i64 [[SUB_PTR_LHS_CAST113]], [[SUB_PTR_RHS_CAST114]]
// CHECK_X64_O0-NEXT:    [[CMP116:%.*]] = icmp ule i64 24, [[SUB_PTR_SUB115]]
// CHECK_X64_O0-NEXT:    br label [[LAND_END]]
// CHECK_X64_O0:       land.end:
// CHECK_X64_O0-NEXT:    [[TMP38:%.*]] = phi i1 [ false, [[LAND_LHS_TRUE]] ], [ false, [[CONT]] ], [ [[CMP116]], [[LAND_RHS]] ], {{!annotation ![0-9]+}}
// CHECK_X64_O0-NEXT:    br i1 [[TMP38]], label [[CONT118:%.*]], label [[TRAP117:%.*]], {{!annotation ![0-9]+}}
// CHECK_X64_O0:       trap117:
// CHECK_X64_O0-NEXT:    call void @llvm.ubsantrap(i8 25) #[[ATTR5]], {{!annotation ![0-9]+}}
// CHECK_X64_O0-NEXT:    unreachable
// CHECK_X64_O0:       cont118:
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP119]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR120:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP119]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR121:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR120]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR122:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP119]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB123:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR122]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR124:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP119]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB125:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR124]], align 8
// CHECK_X64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP126]], ptr align 8 [[AGG_TEMP2]], i64 24, i1 false)
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR127:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP126]], i32 0, i32 0
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_PTR128:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR127]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB_ADDR129:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP126]], i32 0, i32 1
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_UB130:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR129]], align 8
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB_ADDR131:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP126]], i32 0, i32 2
// CHECK_X64_O0-NEXT:    [[WIDE_PTR_LB132:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR131]], align 8
// CHECK_X64_O0-NEXT:    [[CALL:%.*]] = call ptr @__memmove_chk(ptr noundef [[WIDE_PTR_PTR121]], ptr noundef [[WIDE_PTR_PTR128]], i64 noundef 24, i64 noundef [[TMP21]]) #[[ATTR6:[0-9]+]]
// CHECK_X64_O0-NEXT:    call void @llvm.assume(i1 true)
// CHECK_X64_O0-NEXT:    [[ADD_PTR133:%.*]] = getelementptr inbounds nuw i8, ptr [[CALL]], i64 24
// CHECK_X64_O0-NEXT:    ret i32 0
//
// CHECK_ARM64_O0-LABEL: @foo(
// CHECK_ARM64_O0-NEXT:  entry:
// CHECK_ARM64_O0-NEXT:    [[BUF_ADDR:%.*]] = alloca ptr, align 8
// CHECK_ARM64_O0-NEXT:    [[LEN_ADDR:%.*]] = alloca ptr, align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP1:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.0", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP2:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP3:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.0", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP10:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.0", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP19:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.2", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP20:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP35:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.2", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP36:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP49:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP56:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP66:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP75:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP83:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.3", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP84:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP99:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.3", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP100:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP119:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable", align 8
// CHECK_ARM64_O0-NEXT:    [[AGG_TEMP126:%.*]] = alloca %"__bounds_safety::wide_ptr.bidi_indexable.1", align 8
// CHECK_ARM64_O0-NEXT:    store ptr [[BUF:%.*]], ptr [[BUF_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    store ptr [[LEN:%.*]], ptr [[LEN_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP0:%.*]] = load ptr, ptr [[BUF_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP1:%.*]] = load ptr, ptr [[LEN_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP2:%.*]] = load i32, ptr [[TMP1]], align 4
// CHECK_ARM64_O0-NEXT:    [[IDX_EXT:%.*]] = sext i32 [[TMP2]] to i64
// CHECK_ARM64_O0-NEXT:    [[ADD_PTR:%.*]] = getelementptr inbounds i32, ptr [[TMP0]], i64 [[IDX_EXT]]
// CHECK_ARM64_O0-NEXT:    [[TMP3:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[TMP0]], ptr [[TMP3]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP4:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[ADD_PTR]], ptr [[TMP4]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP5:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[TMP0]], ptr [[TMP5]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP1]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP6:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_PTR]], ptr [[TMP6]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP7:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB]], ptr [[TMP7]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP8:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_LB]], ptr [[TMP8]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP9:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr @arr, ptr [[TMP9]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP10:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr getelementptr inbounds (i32, ptr @arr, i64 6), ptr [[TMP10]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP11:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr @arr, ptr [[TMP11]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR4:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR5:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR4]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR6:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB7:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR6]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR8:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP3]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB9:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR8]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP12:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP2]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_PTR5]], ptr [[TMP12]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP13:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP2]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB7]], ptr [[TMP13]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP14:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP2]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_LB9]], ptr [[TMP14]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP15:%.*]] = load ptr, ptr [[BUF_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP16:%.*]] = load ptr, ptr [[LEN_ADDR]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP17:%.*]] = load i32, ptr [[TMP16]], align 4
// CHECK_ARM64_O0-NEXT:    [[IDX_EXT11:%.*]] = sext i32 [[TMP17]] to i64
// CHECK_ARM64_O0-NEXT:    [[ADD_PTR12:%.*]] = getelementptr inbounds i32, ptr [[TMP15]], i64 [[IDX_EXT11]]
// CHECK_ARM64_O0-NEXT:    [[TMP18:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[TMP15]], ptr [[TMP18]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP19:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[ADD_PTR12]], ptr [[TMP19]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP20:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[TMP15]], ptr [[TMP20]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR13:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR14:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR13]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR15:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB16:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR15]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR17:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.0", ptr [[AGG_TEMP10]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB18:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR17]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP21:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR14]] to i64
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP20]], ptr align 8 [[AGG_TEMP2]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR21:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB22:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR21]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP22:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB22]], ptr [[TMP22]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR23:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR24:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR23]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR25:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB26:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR25]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR27:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP20]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB28:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR27]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP23:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_PTR24]], ptr [[TMP23]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP24:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB26]], ptr [[TMP24]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP25:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_LB28]], ptr [[TMP25]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR29:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR30:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR29]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR31:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB32:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR31]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR33:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP19]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB34:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR33]], align 8
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP36]], ptr align 8 [[AGG_TEMP2]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR37:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP36]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR38:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR37]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR39:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP36]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB40:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR39]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR41:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP36]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB42:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR41]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP26:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_PTR38]], ptr [[TMP26]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP27:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB40]], ptr [[TMP27]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP28:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_LB42]], ptr [[TMP28]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR43:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR44:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR43]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR45:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB46:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR45]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR47:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.2", ptr [[AGG_TEMP35]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB48:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR47]], align 8
// CHECK_ARM64_O0-NEXT:    [[SUB_PTR_LHS_CAST:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR30]] to i64
// CHECK_ARM64_O0-NEXT:    [[SUB_PTR_RHS_CAST:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR44]] to i64
// CHECK_ARM64_O0-NEXT:    [[SUB_PTR_SUB:%.*]] = sub i64 [[SUB_PTR_LHS_CAST]], [[SUB_PTR_RHS_CAST]]
// CHECK_ARM64_O0-NEXT:    [[CMP:%.*]] = icmp ule i64 24, [[SUB_PTR_SUB]], {{!annotation ![0-9]+}}
// CHECK_ARM64_O0-NEXT:    br i1 [[CMP]], label [[CONT:%.*]], label [[TRAP:%.*]], {{!annotation ![0-9]+}}
// CHECK_ARM64_O0:       trap:
// CHECK_ARM64_O0-NEXT:    call void @llvm.ubsantrap(i8 25) #[[ATTR5:[0-9]+]], {{!annotation ![0-9]+}}
// CHECK_ARM64_O0-NEXT:    unreachable
// CHECK_ARM64_O0:       cont:
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP49]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR50:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP49]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR51:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR50]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR52:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP49]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB53:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR52]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR54:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP49]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB55:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR54]], align 8
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP56]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR57:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB58:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR57]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP29:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB58]], ptr [[TMP29]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR59:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR60:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR59]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR61:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB62:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR61]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR63:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP56]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB64:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR63]], align 8
// CHECK_ARM64_O0-NEXT:    [[CMP65:%.*]] = icmp ule ptr [[WIDE_PTR_PTR51]], [[WIDE_PTR_PTR60]]
// CHECK_ARM64_O0-NEXT:    br i1 [[CMP65]], label [[LAND_LHS_TRUE:%.*]], label [[LAND_END:%.*]]
// CHECK_ARM64_O0:       land.lhs.true:
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP66]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR67:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB68:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR67]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP30:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_LB68]], ptr [[TMP30]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR69:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR70:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR69]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR71:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB72:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR71]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR73:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP66]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB74:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR73]], align 8
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP75]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR76:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP75]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR77:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR76]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR78:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP75]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB79:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR78]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR80:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP75]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB81:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR80]], align 8
// CHECK_ARM64_O0-NEXT:    [[CMP82:%.*]] = icmp ule ptr [[WIDE_PTR_PTR70]], [[WIDE_PTR_PTR77]]
// CHECK_ARM64_O0-NEXT:    br i1 [[CMP82]], label [[LAND_RHS:%.*]], label [[LAND_END]]
// CHECK_ARM64_O0:       land.rhs:
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP84]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR85:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB86:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR85]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP31:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB86]], ptr [[TMP31]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR87:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR88:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR87]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR89:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB90:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR89]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR91:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP84]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB92:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR91]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP32:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_PTR88]], ptr [[TMP32]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP33:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB90]], ptr [[TMP33]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP34:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_LB92]], ptr [[TMP34]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR93:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR94:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR93]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR95:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB96:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR95]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR97:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP83]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB98:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR97]], align 8
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP100]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR101:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP100]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR102:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR101]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR103:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP100]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB104:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR103]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR105:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP100]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB106:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR105]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP35:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_PTR102]], ptr [[TMP35]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP36:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_UB104]], ptr [[TMP36]], align 8
// CHECK_ARM64_O0-NEXT:    [[TMP37:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    store ptr [[WIDE_PTR_LB106]], ptr [[TMP37]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR107:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR108:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR107]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR109:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB110:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR109]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR111:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.3", ptr [[AGG_TEMP99]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB112:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR111]], align 8
// CHECK_ARM64_O0-NEXT:    [[SUB_PTR_LHS_CAST113:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR94]] to i64
// CHECK_ARM64_O0-NEXT:    [[SUB_PTR_RHS_CAST114:%.*]] = ptrtoint ptr [[WIDE_PTR_PTR108]] to i64
// CHECK_ARM64_O0-NEXT:    [[SUB_PTR_SUB115:%.*]] = sub i64 [[SUB_PTR_LHS_CAST113]], [[SUB_PTR_RHS_CAST114]]
// CHECK_ARM64_O0-NEXT:    [[CMP116:%.*]] = icmp ule i64 24, [[SUB_PTR_SUB115]]
// CHECK_ARM64_O0-NEXT:    br label [[LAND_END]]
// CHECK_ARM64_O0:       land.end:
// CHECK_ARM64_O0-NEXT:    [[TMP38:%.*]] = phi i1 [ false, [[LAND_LHS_TRUE]] ], [ false, [[CONT]] ], [ [[CMP116]], [[LAND_RHS]] ], {{!annotation ![0-9]+}}
// CHECK_ARM64_O0-NEXT:    br i1 [[TMP38]], label [[CONT118:%.*]], label [[TRAP117:%.*]], {{!annotation ![0-9]+}}
// CHECK_ARM64_O0:       trap117:
// CHECK_ARM64_O0-NEXT:    call void @llvm.ubsantrap(i8 25) #[[ATTR5]], {{!annotation ![0-9]+}}
// CHECK_ARM64_O0-NEXT:    unreachable
// CHECK_ARM64_O0:       cont118:
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP119]], ptr align 8 [[AGG_TEMP]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR120:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP119]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR121:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR120]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR122:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP119]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB123:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR122]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR124:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable", ptr [[AGG_TEMP119]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB125:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR124]], align 8
// CHECK_ARM64_O0-NEXT:    call void @llvm.memcpy.p0.p0.i64(ptr align 8 [[AGG_TEMP126]], ptr align 8 [[AGG_TEMP2]], i64 24, i1 false)
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR_ADDR127:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP126]], i32 0, i32 0
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_PTR128:%.*]] = load ptr, ptr [[WIDE_PTR_PTR_ADDR127]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB_ADDR129:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP126]], i32 0, i32 1
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_UB130:%.*]] = load ptr, ptr [[WIDE_PTR_UB_ADDR129]], align 8
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB_ADDR131:%.*]] = getelementptr inbounds nuw %"__bounds_safety::wide_ptr.bidi_indexable.1", ptr [[AGG_TEMP126]], i32 0, i32 2
// CHECK_ARM64_O0-NEXT:    [[WIDE_PTR_LB132:%.*]] = load ptr, ptr [[WIDE_PTR_LB_ADDR131]], align 8
// CHECK_ARM64_O0-NEXT:    [[CALL:%.*]] = call ptr @__memmove_chk(ptr noundef [[WIDE_PTR_PTR121]], ptr noundef [[WIDE_PTR_PTR128]], i64 noundef 24, i64 noundef [[TMP21]]) #[[ATTR6:[0-9]+]]
// CHECK_ARM64_O0-NEXT:    call void @llvm.assume(i1 true)
// CHECK_ARM64_O0-NEXT:    [[ADD_PTR133:%.*]] = getelementptr inbounds nuw i8, ptr [[CALL]], i64 24
// CHECK_ARM64_O0-NEXT:    ret i32 0
//
int foo(int *__counted_by(*len) buf, int *len) {
    memmove(buf, arr, sizeof(arr));

    return 0;
}
